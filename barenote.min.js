var Barenote=(function(){var h=".barenote";var f=".barenote_ref_list";var a="barenote_floating_note";var i="<!--\n#barenote_floating_note {background-color: #eeeeee;padding: 0em 1em 0em 1em;border: solid 1px;font-size: 90%;font-family: Helvetica, Sans-serif;line-height: 1.4;-moz-border-radius: .5em;-webkit-border-radius: .5em;border-radius: .5em;opacity: 0.95;}\n// -->";var g=function(){var j=$(this).offset().top;$("html,body").animate({scrollTop:j},"fast");return false};var d=(function(){var m=document.createElement("style");$(m).attr("type","text/css").html(i);$("head").prepend(m);var k=document.createElement("div");var j=false;$(k).attr("id",a).css({cssText:"position: absolute !important;"}).appendTo(document.body);var l=$(k).css("opacity");$(k).hide();k.show=function(n){var r=$(n.data.element).offset();var p=r.left+$(n.data.element).width();var o=r.top+$(n.data.element).height();var q=n.data.text;clearTimeout(j);$(k).stop();$(k).html(q);if(p+420>$(window).width()+$(window).scrollLeft()){p=$(window).width()-420+$(window).scrollLeft()}if(o+$(k).height()>$(window).height()+$(window).scrollTop()){o=o-$(k).height()-15}$(k).css({opacity:l,left:p,top:o});$(k).show()};k.hide=function(){j=setTimeout(function(){$(k).animate({opacity:0},1000,"",function(){$(k).hide()})},500)};return k})();var b=1;var c=[];var e=function(j){var n=j.find(f).length;if(n>1){throw new Error("The rootElement contain "+n+" elements whose class name is '"+f+"'")}var l=(n!=0);var k=$(document.createElement("ol"));if(l){j.find(f).first().append(k)}var o=b;var m;j.find(h).each(function(r,s){var p=$(s).html();if(!$(s).is("a")){var q=document.createElement("a");$(s).replaceWith(q);s=q}$(s).html(r+1).attr("id","fnref:"+b).attr("href","#fn:"+b).mouseover({element:s,text:p},d.show).mouseout(d.hide);k.append($(bareNoteRef=document.createElement("li")).attr("id","fn:"+b).html(p+"&nbsp;").append($(document.createElement("a")).html("&#8617;").attr("href","#fnref:"+b).click($.proxy(g,s))));if(l){$(s).click($.proxy(g,bareNoteRef))}m=b;b++});this.getRootElement=function(){return j};this.getFirstRefNumber=function(){return o};this.getLastRefNumber=function(){return m};c.push(this);return};e.apply=function(j){if(j==null){j=$("body")}else{j=$(j)}if(j.length==1){return new e(j)}else{var k=[];j.each(function(){k.push(new e($(this)))});return k}};e.getBarenoteList=function(){return c};e.getFloatingNote=function(){return d};return e})();